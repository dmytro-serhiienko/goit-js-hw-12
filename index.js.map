{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderClass = document.querySelector('.loader');\nconst galleryClass = document.querySelector('.gallery');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  preloading: false,\n});\n\nexport function showLoader() {\n  loaderClass.classList.remove('hidden');\n}\n\nexport function removeLoader() {\n  loaderClass.classList.add('hidden');\n}\n\nexport function clearGallery() {\n  galleryClass.innerHTML = '';\n}\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      el => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`\n    )\n    .join('');\n  galleryClass.innerHTML = markup;\n  gallery.refresh();\n}\n\nexport function appendToGallery(images) {\n  const markup = images\n    .map(\n      el => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`\n    )\n    .join('');\n  galleryClass.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function removeLoadMoreButton() {\n  showMoreBtnClass.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  showMoreBtnClass.classList.remove('hidden');\n}\n\nexport function getImageDimensions() {\n  const imageClass = document.querySelector('.gallery-item');\n  const gap = 24;\n  return imageClass.getBoundingClientRect().height + 2 * gap;\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53639618-7ccf198a06ad48a4b9e98f6f9';\n\nexport async function getImages(query, page = 1, limit = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: limit,\n    page: page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return { array: response.data.hits, totalHits: response.data.totalHits };\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  clearGallery,\n  createGallery,\n  removeLoader,\n  showLoader,\n  showLoadMoreButton,\n  removeLoadMoreButton,\n  getImageDimensions,\n  appendToGallery,\n} from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\nconst API_KEY = '53125865-ed9f58673896f3ad0b9dfa3df';\n\nconst submitBtnClass = document.querySelector('.submit-btn');\nconst inputQueryClass = document.querySelector('.form-input');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n//Initialize global variables\n\nlet page = 1;\nlet limit = 15;\nlet currentquery = '';\nlet totalHits = 0;\nlet allImages = [];\n\n// Start with the task\nremoveLoader();\nremoveLoadMoreButton();\n\nsubmitBtnClass.addEventListener('click', async evt => {\n  evt.preventDefault();\n  removeLoadMoreButton();\n  const query = inputQueryClass.value.trim();\n  if (!query) {\n    clearGallery();\n    removeLoadMoreButton();\n    iziToast.error({ message: 'Please enter a query', position: 'topRight' });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    currentquery = query;\n    page = 1;\n    allImages = [];\n    clearGallery();\n\n    const images = await getImages(query, page, limit);\n    if (images.array.length === 0) {\n      removeLoader();\n      removeLoadMoreButton();\n      iziToast.error({\n        message: 'No images were found. Try another query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    removeLoader();\n    allImages = images.array;\n    createGallery(images.array);\n    totalHits = images.totalHits;\n    page += 1;\n\n    if (page * limit <= totalHits) {\n      showLoadMoreButton();\n    } else {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      removeLoadMoreButton();\n    }\n  } catch (error) {\n    removeLoader();\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Try again.',\n      position: 'topRight',\n    });\n  }\n});\n\nshowMoreBtnClass.addEventListener('click', async evt => {\n  evt.preventDefault();\n  removeLoadMoreButton();\n  showLoader();\n  try {\n    const newImages = await getImages(currentquery, page, limit);\n    allImages = allImages.concat(newImages.array);\n    removeLoader();\n\n    appendToGallery(newImages.array);\n\n    setTimeout(() => {\n      let elemHeight = getImageDimensions();\n      window.scrollBy({\n        top: elemHeight * 2,\n        behavior: 'smooth',\n      });\n    }, 100);\n\n    page += 1;\n\n    if (page * limit > totalHits) {\n      removeLoadMoreButton();\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    removeLoader();\n    removeLoadMoreButton();\n    iziToast.error({\n      message: 'Something went wrong. Try again.',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["loaderClass","galleryClass","showMoreBtnClass","gallery","SimpleLightbox","showLoader","removeLoader","clearGallery","createGallery","images","markup","el","appendToGallery","removeLoadMoreButton","showLoadMoreButton","getImageDimensions","BASE_URL","API_KEY","getImages","query","page","limit","params","response","axios","submitBtnClass","inputQueryClass","currentquery","totalHits","allImages","evt","iziToast","error","newImages","elemHeight"],"mappings":"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"}