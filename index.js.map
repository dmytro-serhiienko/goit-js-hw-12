{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderClass = document.querySelector('.loader');\nconst galleryClass = document.querySelector('.gallery');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  preloading: false,\n});\n\nexport function showLoader() {\n  loaderClass.classList.remove('hidden');\n}\n\nexport function removeLoader() {\n  loaderClass.classList.add('hidden');\n}\n\nexport function clearGallery() {\n  galleryClass.innerHTML = '';\n}\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      el => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`\n    )\n    .join('');\n  galleryClass.innerHTML = markup;\n  gallery.refresh();\n}\n\nexport function appendToGallery(images) {\n  const markup = images\n    .map(\n      el => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`\n    )\n    .join('');\n  galleryClass.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function removeLoadMoreButton() {\n  showMoreBtnClass.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  showMoreBtnClass.classList.remove('hidden');\n}\n\nexport function getImageDimensions() {\n  const imageClass = document.querySelector('.gallery-item');\n  const gap = 24;\n  return imageClass.getBoundingClientRect().height + 2 * gap;\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53639618-7ccf198a06ad48a4b9e98f6f9';\n\nexport async function getImages(query, page = 1, limit = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: limit,\n    page: page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return { array: response.data.hits, totalHits: response.data.totalHits };\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  clearGallery,\n  createGallery,\n  removeLoader,\n  showLoader,\n  showLoadMoreButton,\n  removeLoadMoreButton,\n  getImageDimensions,\n  appendToGallery,\n} from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\nconst API_KEY = '53868223-5cc179c49926eee1c1fc25cc4';\n\nconst formEl = document.querySelector('#search-form');\nconst inputEl = document.querySelector('.form-input');\nconst btnShowEl = document.querySelector('.show-more-btn');\n\nlet page = 1;\nlet limit = 15;\nlet currentquery = '';\nlet totalHits = 0;\nlet allImg = [];\n\nremoveLoader();\nremoveLoadMoreButton();\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  removeLoadMoreButton();\n  const query = inputEl.value.trim();\n  if (!query) {\n    clearGallery();\n    removeLoadMoreButton();\n    iziToast.error({ message: 'Please enter a query', position: 'topRight' });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    currentquery = query;\n    page = 1;\n    allImg = [];\n    clearGallery();\n\n    const img = await getImages(query, page, limit);\n    if (img.array.length === 0) {\n      removeLoader();\n      removeLoadMoreButton();\n      iziToast.error({\n        message: 'No images were found. Try another query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    removeLoader();\n    allImg = img.array;\n    createGallery(img.array);\n    totalHits = img.totalHits;\n\n    if (allImg.length < totalHits) {\n      showLoadMoreButton();\n    } else {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      removeLoadMoreButton();\n    }\n  } catch (error) {\n    removeLoader();\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Try again.',\n      position: 'topRight',\n    });\n  }\n});\n\nbtnShowEl.addEventListener('click', async event => {\n  event.preventDefault();\n  removeLoadMoreButton();\n  showLoader();\n  try {\n    page += 1;\n    const newImages = await getImages(currentquery, page, limit);\n    allImg = allImg.concat(newImages.array);\n    removeLoader();\n\n    appendToGallery(newImages.array);\n\n    setTimeout(() => {\n      let elHeight = getImageDimensions();\n      window.scrollBy({\n        top: elHeight * 2,\n        behavior: 'smooth',\n      });\n    }, 100);\n\n    if (allImg.length >= totalHits) {\n      removeLoadMoreButton();\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    removeLoader();\n    removeLoadMoreButton();\n    iziToast.error({\n      message: 'Something went wrong. Try again.',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["loaderClass","galleryClass","showMoreBtnClass","gallery","SimpleLightbox","showLoader","removeLoader","clearGallery","createGallery","images","markup","el","appendToGallery","removeLoadMoreButton","showLoadMoreButton","getImageDimensions","BASE_URL","API_KEY","getImages","query","page","limit","params","response","axios","formEl","inputEl","btnShowEl","currentquery","totalHits","allImg","event","iziToast","img","error","newImages","elHeight"],"mappings":"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"}